<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Food Audit</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="bg"></div>

  <header class="topbar">
    <div class="brandText">
      <div class="title">Food Audit</div>
      <div class="sub">Taos 3158</div>
    </div>

    <nav class="actions">
      <a class="btn" href="index.html">Home</a>
      <a class="btn primary" href="history.html">Audit History</a>
    </nav>
  </header>

  <main class="wrap">
    <section class="card">
      <header class="cardHeader">
        <h1>Food Audit</h1>
        <p>Complete Weekly</p>
      </header>

      <div class="cardBody">
        <form id="auditForm" class="stack">
          <input type="hidden" name="audit_type" value="Food Audit" />

          <div class="panel">
            <div class="grid2">
              <div class="field">
                <label>Auditor (optional)</label>
                <input name="auditor" placeholder="Your name" />
              </div>

              <div class="field">
                <label>Audit Date</label>
                <input type="date" name="audit_date" id="audit_date" />
              </div>

              <div class="field">
                <label>Time (optional)</label>
                <input type="time" name="audit_time" />
              </div>

              <div class="field">
                <label>Notes (optional)</label>
                <input name="header_notes" placeholder="Shift / manager on duty / anything important" />
              </div>
            </div>
          </div>

          <div id="questions" class="stack"></div>

          <div class="panel">
            <div class="row">
              <a class="btn" href="index.html">Cancel</a>
              <button class="btn primary" type="submit">Submit</button>
            </div>
            <p class="muted" style="margin-top:10px;">
              Saved locally on this device. Email to store management when finished.
            </p>
          </div>
        </form>
      </div>
    </section>

    <div class="foot">Store 3158 â€¢ Food Audit</div>
  </main>

  <script src="app.js"></script>

  <script>
    // --- IMPORTANT: make sure the page doesn't crash if section() isn't in app.js ---
    function section(title){
      return `
        <div class="auditSection" style="
          margin-top:18px;
          padding:10px 12px;
          border-radius:14px;
          border:1px solid rgba(18,19,26,0.12);
          background: rgba(255,255,255,0.70);
          font-weight:1000;
          font-size:15px;
        ">
          ${escapeHtml(title)}
        </div>
      `;
    }

    // Default date = today
    const d = new Date();
    document.getElementById("audit_date").value = d.toISOString().slice(0,10);

    // Items in exact order from your screenshots
    const items = [
      section("* Trash"),
      yn("Outside trash not overflowing?"),

      section("* Restrooms"),
      yn("Restrooms clean/Restroom checklist in use?"),
      yn("Restrooms stocked? (toilet paper, soap, paper towels)"),

      section("* Uniforms"),
      yn("Company uniform policy being followed?"),
      yn("BreakTime approved hair restraint in use?"),

      section("* Coffee"),
      yn("Sugar tower clean & stocked?"),
      yn("All counters organized, tidy, clutter free?"),
      yn("Creamers stocked? (Bulk and Singles)"),
      yn("Cappuccino machine clean and all flavors available?"),

      section("* Tea"),
      yn("Tea available and timed correctly?"),

      section("* Soda Fountain"),
      yn("Nozzles clean?"),
      yn("Back splash free from soda spillage?"),
      yn("Mats in use?"),
      yn("Cups and Lids stocked?"),

      section("* Slushies"),
      yn("Filled, clean, and ready to serve?"),

      section("* Hunt Bros Pizza"),
      yn("Product available and timed correctly?"),
      yn("Pizza case is clean?"),
      yn("Make table is rotated/dated correctly? (In & out of date must be shown on toppings)"),
      yn("Toppings chart posted and being followed?"),

      section("* Food Island"),
      yn("Counters clean & tidy?"),
      yn("Are all products offered available and timed correctly?"),

      section("* Kitchen"),
      yn("3 compartment sink being used correctly? (wash: filled with soap, rinse: clean and empty, sanitize: strips being used to test)"),
      yn("BreakTime only approved food products being prepared and served?"),
      yn("Is probe thermometer available and in use?"),
      yn("Hand washing procedure being followed?"),
      yn("Bibs do not exceed 30 days past use by date on case?"),
      yn("Waste sheet in use?"),
      yn("Product not being stored in totes in cooler/freezer?"),
      yn("Cooler/freezer temps within guidelines?"),

      section("* Open Air Cooler"),
      yn("No out of dates/product being rotated?"),

      section("* Conclusion"),
      notesOnly("Notes"),
      yn("MOD available to do a walkthrough with auditor?")
    ];

    // Render
    document.getElementById("questions").innerHTML = items.join("");

    // Save
    document.getElementById("auditForm").addEventListener("submit", (e) => {
      e.preventDefault();
      saveAuditFromForm(e.target);
      window.location.href = "history.html";
    });
  </script>
</body>
</html>
